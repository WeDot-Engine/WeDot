name: å·¥ä½œé“¾
on: [push, pull_request, merge_group, workflow_dispatch]

concurrency:
  group: ci-${{ github.actor }}-${{ github.head_ref || github.run_number }}-${{ github.ref }}-runner
  cancel-in-progress: true

jobs:
  # ç¬¬ä¸€é˜¶æ®µï¼šè¯­æ³•æ£€æŸ¥

  # static-checks:
  #   if: '!vars.DISABLE_GODOT_CI'
  #   name: é™æ€è¯­æ³•æ£€æŸ¥
  #   uses: ./.github/workflows/static_checks.yml

  # ç¬¬äºŒé˜¶æ®µï¼šæ„å»ºå’Œæµ‹è¯•

  android-build:
    name: å®‰å“
    # needs: static-checks
    uses: ./.github/workflows/android_builds.yml

  ios-build:
    name: iOS
    # needs: static-checks
    uses: ./.github/workflows/ios_builds.yml

  linux-build:
    name: Linux
    # needs: static-checks
    uses: ./.github/workflows/linux_builds.yml

  macos-build:
    name: macOS
    # needs: static-checks
    uses: ./.github/workflows/macos_builds.yml

  windows-build:
    name: Windows
    # needs: static-checks
    uses: ./.github/workflows/windows_builds.yml

  web-build:
    name: ç½‘é¡µ
    # needs: static-checks
    uses: ./.github/workflows/web_builds.yml

  # ç¬¬ä¸‰é˜¶æ®µï¼šç”¨å…ˆå‰å·¥ä½œæµçš„æ„å»ºç»“æœè¿è¡Œè¾…åŠ©æµ‹è¯•ã€‚

  # å¯¹äºæ•…æ„ç ´åä¸ godot-cpp å…¼å®¹çš„ PRï¼Œå¯ä»¥å…³é—­ï¼Œ
  # ç›´åˆ°ä¸Šæ¸¸ PR å’ŒåŒ¹é…çš„ godot-cpp æ›´æ”¹éƒ½è¢«åˆå¹¶ã€‚
  # godot-cpp-test:
  #   name: ğŸª² Godot CPP
  #   # This can be changed to depend on another platform, if we decide to use it for
  #   # godot-cpp instead. Make sure to move the .github/actions/godot-api-dump step
  #   # appropriately.
  #   needs: linux-build
  #   uses: ./.github/workflows/godot_cpp_test.yml
